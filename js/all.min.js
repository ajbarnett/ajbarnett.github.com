(function(e,t){var n=e.jQuery||e.Cowboy||(e.Cowboy={}),r;n.throttle=r=function(e,r,i,s){function a(){function p(){u=+(new Date);i.apply(n,l)}function v(){o=t}var n=this,a=+(new Date)-u,l=arguments;if(s&&!o){p()}o&&clearTimeout(o);if(s===t&&a>e){p()}else{if(r!==true){o=setTimeout(s?v:p,s===t?e-a:e)}}}var o,u=0;if(typeof r!=="boolean"){s=i;i=r;r=t}if(n.guid){a.guid=i.guid=i.guid||n.guid++}return a};n.debounce=function(e,n,i){return i===t?r(e,n,false):r(e,i,n!==false)}})(this);var Section=function(e,t){this.$sec=e;this.config=t};Section.prototype.loadHtml=function(){if(!this._ishtmlloaded){this.$sec.addClass("loaded").uncomment();this._ishtmlloaded=true}};Section.prototype.loadScripts=function(){if(typeof this._arescriptsloaded!==undefined){return this._arescriptsloaded}var e=this.config.scripts;if(!e||!e.length){return this._arescriptsloaded=true}for(var t=0,n=e.length;t<n;t++){this._loadScript(e[t])}};Section.prototype._loadScript=function(e){};Section.prototype.initialize=function(){var e=this.config.init;if(e&&$.isFunction(e)){e(this.$sec)}};Section.prototype.isLoaded=function(){return this._ishtmlloaded||false};$.fn.Section=function(e,t){if(typeof e==="object"){var n={scripts:[],init:function(e){}};var r=$.extend(n,e);return this.each(function(){var e=$(this);e.data("section-plugin",new Section(e,r))})}else if(typeof e==="string"){var i=this.first();if(i.length){var s=i.data("section-plugin");if(s&&e.length){return s[e](t)}}}else{return this.data("section-plugin")}};$(document).ready(function(){$("#home").Section({scripts:["js/slides.js"],init:function(e){$("#home-slides").slide({autostart:false,slides:function(){var e=93,t=0,n=new Array(e);while(t<e){n[t++]={src:"img/"+(t<10?"0":"")+t+".png"}}return n}()})}});$("#theday, #accomodations, #outoftowners, #registry, #contact, #reading").Section({});$("#fridaypicnic").Section({scripts:["js/slides.js"],init:function(e){$("#picnic-slides").slide({autostart:false,slides:[{src:"img/ebengfine_0.jpg"},{src:"img/ebengfine_ropeswing.jpg"},{src:"img/ebengfine_rocks.jpg"}]})}});$("#directions").Section({scripts:["asdf","js/maps.js"],init:function(e){if(typeof Mapper!=="undefined"){new Mapper}}})});$.fn.uncomment=function(e){$(this).contents().each(function(){if(e&&this.hasChildNodes()){$(this).uncomment(e)}else if(this.nodeType==8){var t=$("<span>"+this.nodeValue+"</span>");$(this).replaceWith(t.contents())}})};if(typeof console==="undefined"){console={log:function(){},info:function(){}}}var Countdown=function(){var e=$("#countdown-days"),t=e.closest(".countdown"),n=Math.floor((new Date(2013,5,22)-new Date)/(1e3*60*60*24));setTimeout(function(){if($(window).width()<480){return}e.text(n);t.hide().removeClass("hide").fadeIn(1e3)},200)};var jaNav=function(){this.$nav=$(".main-nav");this.$trees=$(".trees");this.init()};jaNav.prototype.init=function(){var e=$(window),t=this;this.loadAllSections();this.bindNavClick();$("#backtotop").click(function(e){e.preventDefault();$("html, body").animate({scrollTop:0});$(this).fadeOut(100)});this.handleResize(e);e.resize($.throttle(500,function(){t.handleResize(e)}))};jaNav.prototype.handleResize=function(e){var t=e.width(),n=this.isSmall,r=this.isSmall=t<820,i=n===undefined||n!==r;if(r){if(i){this.destroyBackToTop(e)}}else{this.initBackToTop(e)}};jaNav.prototype.initBackToTop=function(e){var t=this,n=t.$btt||(t.$btt=$(document.getElementById("backtotop"))),r=function(){var r=t.$nav,i=t.bttWidth||(t.bttWidth=n.width()),s=t.navHeight||(t.navHeight=r.outerHeight()),o=t.navWidth||(t.navWidth=r.outerWidth()),u=r.offset(),a=u.top+s,f=u.left+o,l=e.scrollTop();if(l>a+400){n.css("left",f-i-20);if(n.is(":hidden")){n.fadeIn(100)}}else{if(n.is(":visible")){n.fadeOut(100)}}};if(!n.data("check-btt")){n.data("check-btt",true);e.bind("scroll.checkbtt",$.throttle(500,r))}r()};jaNav.prototype.destroyBackToTop=function(e){var t=this.$btt||(this.$btt=$(document.getElementById("backtotop")));if(t.data("check-btt")){e.unbind(".checkbtt");t.data("check-btt",false).fadeOut(100)}};jaNav.prototype.bindNavClick=function(e){var t=this.$nav,n=this;if(!t.length){return}t.on("click","li",function(e){e.preventDefault();var r=$(this).find("a").attr("href");n.goToSection(r,t)})};jaNav.prototype.goToSection=function(e,t){var n=$(e);if(!n.length){return}$("html, body").animate({scrollTop:n.offset().top})};jaNav.prototype.goToNav=function(e){var t=e.closest(".left-rail"),n=$(".main-rail"),r=$(window).width();n.css({position:"absolute"}).animate({left:r});t.css({position:"relative"}).animate({left:0})};jaNav.prototype.loadAllSections=function(){var e=this;$(".sec").each(function(){e.loadSection("#"+this.id)})};jaNav.prototype.loadSection=function(e){var t=$(e),n=t.Section(),r=new $.Deferred;if(!t.length||n===undefined){r.reject("no section")}else if(n.isLoaded()){r.resolve()}else{n.loadHtml();setTimeout(function(){n.initialize();r.resolve()},100)}return r.promise()};$(document).ready(function(){new jaNav;Countdown()});var Slide=function(e,t){this.$frame=e;this.config=t;this.slides=t.slides||[];this.width=e.width();this.height=e.height();this.init()};Slide.prototype.init=function(){var e=this;this.loadNext().then(function(t){e.addControls();e.goTo(t)}).fail(function(e){console.log("unable to load first slide: "+e)});$(window).bind("resize",$.throttle(400,function(){var t=e.$frame;e.width=t.width();e.height=t.height();e.resizeCurrentImage()}))};Slide.prototype.addControls=function(){var e=this.config.autostart?"pause":"play";this.$frame.append(['<div class="controls">','<div class="icon '+e+'"></div>','<div class="icon prev"></div>','<div class="icon next"></div>',"</div>",'<div class="controls fs-controls">','<div class="icon fullon"></div>',"</div>"].join(""));this.bindControlEvents();this.flashControls()};Slide.prototype.bindControlEvents=function(){var e=this.$frame,t=this,n=false,r=function(e,r){if(!n){n=true;e.siblings(".pause").removeClass("pause").addClass("play");t.pause();$.proxy(r,t)().done(function(){n=false})}},i=e.find(".controls");e.mouseenter(function(){i.stop().animate({bottom:"0px"},300)}).mouseleave(function(){i.stop().animate({bottom:"-55px"},500)});i.on("click",".icon",function(e){e.preventDefault();var n=$(e.target);if(n.hasClass("play")){t.play();n.removeClass("play").addClass("pause")}else if(n.hasClass("pause")){t.pause();n.removeClass("pause").addClass("play")}else if(n.hasClass("prev")){r(n,t.recede)}else if(n.hasClass("next")){r(n,t.advance)}else if(n.hasClass("fullon")){t.fullscreenOn();n.removeClass("fullon").addClass("fulloff")}else if(n.hasClass("fulloff")){t.fullscreenOff();n.removeClass("fulloff").addClass("fullon")}})};Slide.prototype.flashControls=function(){var e=this;setTimeout(function(){e.$frame.trigger("mouseenter")},1e3)};Slide.prototype.play=function(){var e=this,t=this.config.speed;this.playing=true;(function n(){if(!e.playing){return}e.loadNext().then(function(r){if(!e.playing){return}e.goTo(r).then(function(){if(!e.playing){return}e.timeout=setTimeout(n,t)}).fail(function(e){console.log("failed to goTo "+r+": "+e)})}).fail(function(e){console.log("failed to play: "+e)})})()};Slide.prototype.pause=function(){this.playing=false;if(this.timeout!==undefined){clearTimeout(this.timeout)}};Slide.prototype.advance=function(){var e=this,t=$.Deferred();this.loadNext().then(function(n){e.goTo(n).fail(function(e){console.log("failed to goTo "+n+": "+e)}).done(function(){t.resolve()})}).fail(function(e){t.resolve();console.log("failed to advance: "+e)});return t.promise()};Slide.prototype.recede=function(){var e=this,t=$.Deferred();this.loadPrev().then(function(n){e.goTo(n).fail(function(e){console.log("failed to goTo "+n+": "+e)}).done(function(){t.resolve()})}).fail(function(e){t.resolve();console.log("failed to recede: "+e)});return t.promise()};Slide.prototype.fullscreenOn=function(){var e=this.$frame,t=e.outerHeight(true),n="fp-"+(new Date).getTime();$('<div id="'+n+'" style="height:'+t+'px;"></div>').insertBefore(e);e.appendTo("body").addClass("fullscreen").data("placeholder",n);$(window).trigger("resize")};Slide.prototype.fullscreenOff=function(){var e=this.$frame,t=e.data("placeholder");$("#"+t).replaceWith(e.removeClass("fullscreen"));$(window).trigger("resize")};Slide.prototype.goTo=function(e){var t=this,n=this.slides,r=n[e],i,s=$.Deferred();if(r===undefined){return s.reject("no slide at "+e)}i=r.$slide;if(i===undefined||!i.length){return s.reject("no $slide at "+e)}var o=this.$frame.children(".slide:not(.hide)"),u=function(){i.hide().removeClass("hide").fadeIn(400,s.resolve)};if(o.length){o.fadeOut(300,function(){$(this).addClass("hide").hide();u()})}else{u()}return s.promise()};Slide.prototype.loadPrev=function(){var e=this,t=this.slides,n=t.length,r=n,i=this.itr===undefined?0:this.itr,s=function(){i=i===0?n-1:i-1;return i},o=$.Deferred();(function u(){e.load(s()).then(function(t,n){e.itr=t;o.resolve(t)}).fail(function(){if(r--){u()}else{o.reject("theres nothing else to load")}})})();return o.promise()};Slide.prototype.loadNext=function(){var e=this,t=this.slides,n=t.length,r=n,i=this.itr===undefined?-1:this.itr,s=function(){i=i===n-1?0:i+1;return i},o=$.Deferred();(function u(){e.load(s()).then(function(t,n){e.itr=t;o.resolve(t)}).fail(function(){if(r--){console.log("the last one didnt load, loading next");u()}else{o.reject("theres nothing else to load")}})})();return o.promise()};Slide.prototype.resizeCurrentImage=function(){try{var e=this.slides[this.itr].$slide.find("img");this.sizeImg(e)}catch(t){}};Slide.prototype.load=function(e){var t=this,n=this.slides,r,i,s,o=$.Deferred(),u=+(new Date),a="s"+u;if(e<0||e>=n.length){return o.reject("slide index is bad: "+e)}r=n[e];if(r.$slide!==undefined){return o.resolve(e,r.$slide)}s=r.src;if(s===undefined||s.length===0){return o.reject("no src on this slide")}i='<div id="'+a+'" class="slide offpage"><img src="'+s+'"></div>';this.$frame.append(i);var f=0;$("#"+a+" img").load(function(){var n=$(this),i=n.closest(".slide");if(!t.sizeImg(n)){if(f++<3){console.log("no dimensions, trying again");n.trigger("load")}else{o.reject("bad image, no dimensions")}}else{i.removeAttr("id").removeClass("offpage").addClass("hide");r.$slide=i;o.resolve(e,i)}}).error(function(){o.reject("loading failed")});return o.promise()};Slide.prototype.sizeImg=function(e){var t=this.width,n=this.height,r=e.width(),i=e.height(),s,o,u=r/t,a=i/n,f;if(r===0||i===0){return false}f=Math.max(u,a);s=r/f;o=i/f;e.css({width:s+"px",height:o+"px",marginTop:o*-.5+"px",marginLeft:s*-.5+"px"});return true};$.fn.slide=function(e){var t={slides:[],speed:3e3,autostart:true};var e=$.extend(t,e);return this.each(function(){new Slide($(this),e)})};var Mapper=function(){this.MAP_ID="#map-canvas";this.$map=$(this.MAP_ID);if(google&&google.maps){this.initialCenter=new google.maps.LatLng(40.05,-105.249023)}this.initialZoom=9;this.init()};Mapper.prototype.init=function(){if(typeof google==="undefined"){return}this.places=this.buildPlaces();this.map=this.buildMap();this.initLocationsPicker();this.initMapClear()};Mapper.prototype.initMapClear=function(){var e=$("#map-picker"),t=e.find(".clear-map"),n=this;t.click(function(){e.find(".location.active, .location.disabled").each(function(){var e=$(this);n.deactivateLocation(e);n.enableLocation(e)});n.clearMap()})};Mapper.prototype.initLocationsPicker=function(){var e=$("#map-from"),t=$("#map-to");e.append(this.buildLocationPicker("from",["dia","boulderado","marriott","ebengfine","lionscrest"]));t.append(this.buildLocationPicker("to",["boulderado","marriott","ebengfine","lionscrest","dia"]));this.bindLocationClick()};Mapper.prototype.bindLocationClick=function(){var e=this;$("#map-picker").on("click",".location",function(){var t=$(this);if(t.hasClass("active")||t.hasClass("disabled")){return}var n=t.find("input"),r=n.attr("name"),i=n.val(),s=t.closest(".locations").siblings(),o={},u,a=e.places;n.attr("checked","checked");if(r==="from"){e.updateOtherSide(i,s)}e.deactivateLocation(t.siblings(".active"));e.activateLocation(t);o=e.buildLocations(a,r,i,s);if(e.hasValidLocation(o,"from")&&e.hasValidLocation(o,"to")){e.getDirections(o).then(function(){setTimeout(function(){$("html, body").animate({scrollTop:$("#map-canvas").offset().top-30},1e3)},500)}).fail(function(e){if(window.console&&console.log){console.log(e)}})}})};Mapper.prototype.buildLocations=function(e,t,n,r){var i={},s=r.find(".location.active");i[t]=e[n];if(s.length){i=$.extend(i,this.getLocationObject(e,s))}return i};Mapper.prototype.hasValidLocation=function(e,t){return e.hasOwnProperty(t)&&e[t]!==undefined};Mapper.prototype.getLocationObject=function(e,t){var n={},r=t.find("input"),i,s;if(r.length){s=r.attr("name");i=r.val();if(i!==undefined&&i.length){n[s]=e[i]}}return n};Mapper.prototype.updateOtherSide=function(e,t){if(e===undefined||!e.length||!t.length){return}var n=t.find(".location"),r=n.filter(".disabled"),i=n.filter(".active"),s=n.find("input[value="+e+"]").closest(".location");this.deactivateLocation(i);if(!r.is(s)){this.disableLocation(s);this.enableLocation(r)}};Mapper.prototype.disableLocation=function(e){e.addClass("disabled").find("input").prop("disabled","disabled")};Mapper.prototype.enableLocation=function(e){e.removeClass("disabled").find("input").prop("disabled",false)};Mapper.prototype.deactivateLocation=function(e){if(e!==undefined&&e.length){e.removeClass("active").find(".address").slideUp().end().find("input").attr("checked",false).prop("checked",false)}};Mapper.prototype.activateLocation=function(e){if(e!==undefined&&e.length){e.addClass("active").find(".address").slideDown()}};Mapper.prototype.buildLocationPicker=function(e,t){var n=[],r=this.places;for(var i=0,s=t.length;i<s;i++){n.push(this.buildLocation(e,r,t[i]))}return n.join("")};Mapper.prototype.buildLocation=function(e,t,n){var r=t[n];if(r===undefined){return""}var i=['<div class="location">','<input type="radio" name="'+e+'" value="'+n+'" />','<span class="glyph '+r.icon+'"></span>',"<h5>"+r.name+"</h5>",'<div class="address">'+r.address+"</div>","</div>"];return i.join("")};Mapper.prototype.buildPlaces=function(){if(typeof this.places!=="undefined"){return this.places}return{dia:{name:"Denver International Airport",icon:"paper-plane",address:"8500 Peña Boulevard<br>Denver, CO<br>80249-6340",googAddress:"8500 Pena Boulevard, Denver, CO 80249-6340"},boulderado:{name:"Hotel Boulderado",icon:"luggage",address:"2115 13th St<br>Boulder, CO<br>80302",googAddress:"2115 13th St, Boulder, CO 80302"},marriott:{name:"Courtyard by Marriott",icon:"luggage",address:"4710 Pearl East Circle<br>Boulder, CO<br>80301",googAddress:"4710 Pearl East Circle, Boulder, CO 80301"},ebengfine:{name:"Eben G. Fine Park",icon:"leaf",address:"3rd & Arapahoe Ave.<br>Boulder, CO<br>80302",googAddress:"Eben G. Fine Park, Boulder, CO"},lionscrest:{name:"Lionscrest Manor",icon:"heart-full",address:"603 Indian Lookout Road<br>Lyons, CO<br>80540",googAddress:"603 Indian Lookout Road, Lyons, CO 80540"}}};Mapper.prototype.buildMap=function(){var e=this.$map,t=google.maps;if(e===undefined||!e.length||t===undefined){return}return new t.Map(e.get(0),{center:this.initialCenter,zoom:this.initialZoom,mapTypeId:t.MapTypeId.ROADMAP,scrollwheel:false})};Mapper.prototype.clearMap=function(){try{$("#directions-panel").empty();this.directionsDisplay.setMap(null)}catch(e){}};Mapper.prototype.getDirections=function(e){var t=this.map,n=e&&e.from||{},r=e&&e.to||{},i=this.getDirDisplay(),s=this.getDirService(),o={origin:n.googAddress,destination:r.googAddress,travelMode:google.maps.TravelMode.DRIVING},u=$.Deferred();if(typeof o.origin==="undefined"||typeof o.destination==="undefined"){u.reject("Missing at least one location.")}else if(o.origin===o.destination){u.reject("Origin and destination are the same.")}else{s.route(o,function(e,t){if(t==google.maps.DirectionsStatus.OK){i.setDirections(e);u.resolve()}else{u.reject("The Directions Service failed. Status: "+t)}})}return u.promise()};Mapper.prototype.getDirDisplay=function(){var e=this.directionsDisplay,t=document.getElementById("directions-panel");t.innerHTML="";if(e===undefined){this.directionsDisplay=e=new google.maps.DirectionsRenderer;e.setMap(this.map);e.setPanel(t)}return e};Mapper.prototype.getDirService=function(){var e=this.directionsService;if(e===undefined){this.directionsService=e=new google.maps.DirectionsService}return e}